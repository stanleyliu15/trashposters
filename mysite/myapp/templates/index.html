{% extends 'layouts/base.html' %}
{% load staticfiles %}
{% block title %}
    <title>Home</title>
{% endblock %}

{% block styles %}
    <link rel="stylesheet" href="{% static 'css/home/index.css' %}">
{% endblock %}


{% block content %}
    <div class="container">
        <!-- Search -->
        <div class="row">
            <div class="col mt-4">
                <form id="search-form">
                    <div class="form-group mb-0">
                        <label for="query">Search Environmental Issues</label>
                        <div class="input-group">
                            <!-- Filter Menu -->
                            <span class="input-group-prepend">
              <select class="custom-select resize-select h-100 py-0" id="filter-post-menu">
                <option value="all">All</option>
		<option value="title">Title</option>
                <option value="description">Description</option>
                <option value="hazard">Hazard</option>
                <option value="location">Location</option>
                <option value="user">User</option>
              </select>
            </span>
                            <!-- Search Bar -->
                            <input class="form-control form-control-lg" id="query" type="text" aria-label="Search"
                                   aria-describedby="search-addon">
                            <!-- Search Icon -->
                            <span class="input-group-append">
              <button class="btn btn-outline-secondary border" type="button" onClick="search()">
                <i class="fa fa-search"></i>
              </button>
            </span>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <!-- Create Post | Register to Post -->
        <div class="row">
            <div class="col">
                {% if user.is_authenticated %}
                    <a href="post-add">Create Post</a>
                {% else %}
                    <a href="register">Register to Post</a>
                {% endif %}
            </div>
        </div>

        <!-- Feed -->
        <div class="row">
            <div class="col">
                <div id="posts">
                    <!-- Sample Post -->
                    <div class="card">
                        <div class="card-header">
                            <img class="rounded-circle" src="https://picsum.photos/960/960" height="40"
                                 alt="user-profile-picture">
                            <span class="ml-2">Sample Title</span>
                        </div>
                        <img class="card-img-top" src="https://picsum.photos/960/480" height="200" alt="post-image">
                        <div class="card-body">
                            <p class="card-text">Sample Author</p>
                            <span class="card-text">Hazard <i class="fa fa-map-marker"></i> Location</span>
                        </div>
                    </div>
                    <!-- Close Sample Post -->
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    <script src="{% static 'js/utils/resize_select.js' %}"></script>
	<script type="text/javascript">
		function search(){
			var selection = $('#filter-post-menu').find(':selected').text().toLowerCase();
			var query = $('#query').val();
			window.location.replace("./search/"+selection+"="+query);

		}
	</script>

{% endblock %}
